# リポジトリ整理後のローカル環境クリーンアップガイド

このガイドでは、飛行ロボットコンテストルール管理リポジトリの整理が完了した後、ローカル環境をクリーンアップして古いファイルを整理する方法について説明します。

## 1. ローカル環境のクリーンアップ

### 1.1 ローカルブランチの整理

プルリクエストがマージされ、リモートリポジトリが更新された後、ローカルブランチの整理が必要です。

```bash
# mainブランチに移動
git checkout main

# リモートの変更を反映
git pull origin main

# マージ済みブランチの一覧を表示
git branch --merged

# マージ済みブランチの削除（個別に削除する場合）
git branch -d organization-2025-03-new

# すべてのマージ済みローカルブランチを削除する場合（mainを除く）
git branch --merged | grep -v "\*\|main" | xargs -n 1 git branch -d
```

### 1.2 作業ディレクトリのクリーンアップ

一時ファイルや不要になったファイルを削除します。

```bash
# 一時ファイルの削除
rm -rf Extracted_Images/
rm -rf Sorted_Images/
rm -rf Metadata/

# キャッシュファイルの削除
find . -name "*.pyc" -delete
find . -name "__pycache__" -type d -exec rm -rf {} +
find . -name ".DS_Store" -delete
```

### 1.3 Gitキャッシュのクリーンアップ

```bash
# ステージングされていない変更を確認
git status

# ローカルリポジトリのキャッシュをクリーンアップ
git gc

# 未追跡のファイルを表示（削除はしない）
git clean -n

# 未追跡のファイルを削除（注意して使用してください）
# git clean -fd
```

## 2. デスクトップ上の古いファイルの整理

### 2.1 作業ファイルの確認

デスクトップや他の場所に保存された関連ファイルを特定します。

1. デスクトップ上の関連ファイルを確認
2. ダウンロードフォルダ内の関連ファイルを確認
3. バックアップとして保存しておきたいファイルを特定

### 2.2 ファイルの分類

検出したファイルを以下のカテゴリに分類します：

- **リポジトリに統合済み**: すでにGitHubリポジトリに取り込まれたファイル（削除可能）
- **まだ統合されていない**: リポジトリにまだ取り込まれていない重要なファイル（要確認）
- **参照用**: 今後の参照のために保持したいファイル（アーカイブ）
- **不要**: もう必要のないファイル（削除）

### 2.3 整理作業の実行

#### a. 統合済みファイルの削除

以下のようなファイルは安全に削除できます：

- リポジトリに追加済みの画像ファイル
- リポジトリに追加済みのスクリプト
- リポジトリに統合済みのドキュメント

```bash
# 例: デスクトップ上のファイルを削除
rm ~/Desktop/飛行ロボットコンテスト画像管理ツール.md
rm ~/Desktop/飛行ロボットコンテスト画像管理システム実装計画書.md
```

#### b. 未統合ファイルの確認

以下の手順で未統合ファイルを確認します：

1. ファイルの内容を確認
2. リポジトリ内の関連ファイルと比較
3. 差分があれば新たなプルリクエストとして提案を検討

#### c. 参照用ファイルのアーカイブ

今後の参照のために重要なファイルはアーカイブします：

```bash
# アーカイブディレクトリの作成
mkdir -p ~/Documents/飛行ロボコン/参照資料

# ファイルの移動
mv ~/Desktop/飛行ロボコン関連資料/* ~/Documents/飛行ロボコン/参照資料/

# 必要に応じてファイルを圧縮
cd ~/Documents/飛行ロボコン/
zip -r 飛行ロボコン参照資料_$(date +%Y%m%d).zip 参照資料/
```

#### d. 不要ファイルの削除

明らかに不要なファイルは削除します：

- 古いバージョンのファイル
- 一時ファイルやバックアップファイル
- 中間処理ファイル

### 2.4 チェックリスト

以下のチェックリストを使用して、整理作業の完了を確認します：

- [ ] ローカルブランチが整理された
- [ ] 不要な一時ファイルが削除された
- [ ] デスクトップの関連ファイルが整理された
- [ ] 重要なファイルがアーカイブされた
- [ ] 開発環境が最新の状態になっている

## 3. 次の開発サイクルの準備

### 3.1 環境の確認

```bash
# リポジトリのステータス確認
git status

# 最新の変更を取得
git pull origin main

# 必要なパッケージの確認
pip list | grep pillow
npm list | grep sharp
```

### 3.2 次回の作業項目の計画

`FUTURE_PLANS.md`を確認し、次のステップを計画します：

```bash
# 進捗状況の確認
cat docs/FUTURE_PLANS.md
```

次のフェーズである「自動化フロー」の準備を検討します。

## まとめ

以上の手順に従って、ローカル環境のクリーンアップとデスクトップ上の古いファイルの整理を行います。これにより、開発環境が整理され、次の開発サイクルに効率的に取り組むことができます。

クリーンアップ後は、`FUTURE_PLANS.md`を参照して次のステップを確認し、必要に応じて新しいイシューやブランチを作成して作業を進めてください。

---

最終更新日: 2025年3月11日
